# Documentation for script: _areFamiliesHomologous_

## Summary
Our programs famXpander, Protocol2 and GSAT were integrated into a pipeline 
that significantly speeds up the analysis of distant evolutionary relationships between 
families using the transitivity property of homology. In addition, BLASTs for all 
proteins in TCDB were pre-computed to allow rapid comparisons of large superfamilies 
and make analyses at the level of class or subclass. Users have the option to use 
precomputed alignments or run new BLASTs for their sequences.

First, famXpander is run in order to extract an expanded list of candidate homologous 
proteins for each family. Second, protocol2 is run to determine homology and TMS 
topology. Only those pairs that have a protocol2 score above a user-specified 
threshold and minimum alignment length will be singled out to run gsat. If gsat has 
a z-score above a user-specified value it will be indicated.

## How to cite this program
If you find this program useful, please cite the paper:  

  * Medrano-Soto A, Moreno-Hagelsieb G, McLaughlin D, Ye ZS, Hendargo KJ, Saier MH Jr. _Bioinformatic characterization of the Anoctamin Superfamily of Ca2+-activated ion channels and lipid scramblases._  2018. PLoS One. **13**(3):e0192851  **PMID:** [29579047](https://www.ncbi.nlm.nih.gov/pubmed/?term=29579047)  


## Dependencies
The following programs need to be available in your path for this 
program to run properly:

1. **_extractFamily.pl_**  
This program is available in our [Perl repository](https://github.com/SaierLaboratory/TCDBtools). 

2. **_famXpander.pl_**  
This program is available in our [Perl repository](https://github.com/SaierLaboratory/TCDBtools). 

3. **_protocol2.py_**  
This program is available in our [Python repository](https://github.com/SaierLaboratory/BioVx).

4. **_gsat.py_**  
This program is available in our [Python repository](https://github.com/SaierLaboratory/BioVx).

5. **_PERL 5.18_**  
Visit the [official website](https://www.perl.org/). This program 
was not tested with more recent versions of perl.

## Command line options
The following options are available. You can also run the 
script without arguments to display the options:


    -f, --family {string} (Mandatory)
      TCID of the family for which Pfam domain analysis will be carried out.
      If multiple TCIDs are given, they whould be comma-separated. The analysis
      will be performed individually for each family, unless the flag -sf is
      given, in which case all TCIDs will be treated as a superfamily.

    -dc, --domain-cov {float} (Default: 0.7)
      Minimum coverage of the Pfam domain to consider it a match. If coverage
      is less than the specified threshold, the coverage must apply to the
      the query protein to consider the domain hit significant.

    -pc, --protein-cov {float} (Default: 0.1)
      Minimum coverage of the query protein sequence per domain.

    -e, --evalue {float} (Default: 1e-5)
      Maximum evalue threshold to consider a Pfam domain hit.

    -m, --prots-w-domain {float) (Default: 0.10)
      Minimum proportion of the proteins in the input family that should
      contain a domain, in order to consider the domain as part of the
     family for the purpose of this analyis.

    -o, --outdir {path} (Default: .)
      Directory where results and intermediary files will be saved.

    -s, --tcdb-seqs {file} (Mandatory)
      FASTA file with all sequences in TCDB (as generated by program
      extractFamily.pl). This file will be used to extract sequences
      and TCIDs for all members of the input family. This allows to
      freeze TCDB contents at a specific date, for the purpose defining
      a project.

    -sf, --superfamily {flag} (default: negated as --no-superfamily)
      This indicates that all families passed to option -f will be
      treated as a superfamily (i.e. as a single family) for the purpose of
      the Pfam domain  analysis. This is useful when a superfamily is
      composed of two or more different family TCIDs.

    -pfam {file} (Mandatory)
      The output of running hmmscan against all TCDB, or at least the input
      family(-ies).

    -b, --blastdb {path} (Default: assumed available in $BLASTDB)
      Full path to the blast database containing all the sequences in
      TCDB, this is to easily extract segments of proteins that match
      Pfam domains.

     -p, --rescue-prog (Default: ssearch36)
       Program that will be used to project or rescue domains in
       proteins that did have direct hits with Pfam domains.

    -h, --help
      Display this help. If present, this option takes precedence over any
      other option.
